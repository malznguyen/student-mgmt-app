<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Courses Â· Student Mgmt</title>
  <link rel="stylesheet" href="../style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="min-h-screen bg-slate-100 text-slate-700" x-data="{ sidebarOpen: false }" x-on:keydown.escape.window="sidebarOpen = false">
  <div class="flex min-h-screen">
    <div x-cloak x-show="sidebarOpen" x-transition.opacity class="fixed inset-0 z-30 bg-slate-900/40 md:hidden" aria-hidden="true" @click="sidebarOpen = false"></div>
    <aside x-cloak x-show="sidebarOpen" x-transition:enter="transition transform duration-200" x-transition:enter-start="-translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transition transform duration-200" x-transition:leave-start="translate-x-0" x-transition:leave-end="-translate-x-full" class="fixed inset-y-0 left-0 z-40 w-72 bg-white border-r border-slate-200 md:static md:translate-x-0 md:block">
      <div class="flex items-center gap-3 px-6 h-16 border-b border-slate-100">
        <img src="../assets/logo.svg" alt="Student Management logo" class="h-9 w-9" />
        <div>
          <p class="text-sm uppercase tracking-widest text-slate-400">Student Mgmt</p>
          <p class="text-base font-semibold text-slate-800">Admin Console</p>
        </div>
      </div>
      <nav class="px-4 py-6 space-y-1 text-sm font-medium">
        <a href="/" class="flex items-center gap-3 rounded-xl px-3 py-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-500">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M3 9.75 12 3l9 6.75V21a.75.75 0 0 1-.75.75H3.75A.75.75 0 0 1 3 21V9.75Z" /><path d="M9 21v-6h6v6" stroke-linecap="round" /></svg>
          </span>
          Dashboard
        </a>
        <a href="/pages/students.html" class="flex items-center gap-3 rounded-xl px-3 py-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-500">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" /><path d="M4.5 21a7.5 7.5 0 0 1 15 0" stroke-linecap="round" /></svg>
          </span>
          Students
        </a>
        <a href="/pages/courses.html" aria-current="page" class="flex items-center gap-3 rounded-xl px-3 py-2 bg-slate-900/5 text-slate-900">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900 text-white">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M4.5 5.25h15" stroke-linecap="round" /><path d="M6 4.5h12A1.5 1.5 0 0 1 19.5 6v13.5a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75V6A1.5 1.5 0 0 1 6 4.5Z" /><path d="M9 9h6m-6 4.5h6" stroke-linecap="round" /></svg>
          </span>
          Courses
        </a>
        <a href="/pages/sections.html" class="flex items-center gap-3 rounded-xl px-3 py-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-500">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M4.5 6.75h15" stroke-linecap="round" /><path d="M4.5 12h15" stroke-linecap="round" /><path d="M4.5 17.25h15" stroke-linecap="round" /></svg>
          </span>
          Sections
        </a>
        <a href="/pages/enrollments.html" class="flex items-center gap-3 rounded-xl px-3 py-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-500">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M4.5 4.5h15v15h-15z" /><path d="M8.25 8.25h7.5v7.5h-7.5z" /><path d="M8.25 4.5v3.75M15.75 4.5v3.75M4.5 12h3.75m7.5 0H19.5M8.25 16.5V19.5m7.5-3v3" stroke-linecap="round" /></svg>
          </span>
          Enrollments
        </a>
      </nav>
      <div class="mt-auto px-6 py-6 border-t border-slate-100 text-xs text-slate-500">
        <p>Catalog last synced <span class="font-semibold text-slate-700">3 mins ago</span></p>
        <p class="mt-1">Dean review <span class="font-semibold text-slate-700">Apr 15</span></p>
      </div>
    </aside>

    <div class="flex-1 flex flex-col min-h-screen">
      <header class="sticky top-0 z-20 border-b border-slate-200 bg-white/95 backdrop-blur">
        <div class="flex items-center justify-between px-4 sm:px-6 h-16">
          <div class="flex items-center gap-3">
            <button type="button" class="inline-flex items-center justify-center rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-slate-300 hover:text-slate-900 md:hidden" @click="sidebarOpen = true" aria-label="Open navigation menu">
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M4.5 7.5h15M4.5 12h15M4.5 16.5h15" stroke-linecap="round" /></svg>
            </button>
            <div>
              <p class="text-xs uppercase tracking-widest text-slate-400">Catalog</p>
              <h1 class="text-lg font-semibold text-slate-900">Courses</h1>
            </div>
          </div>
          <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-slate-600">
            <a href="/" class="hover:text-slate-900">Dashboard</a>
            <a href="/pages/students.html" class="hover:text-slate-900">Students</a>
            <a href="/pages/courses.html" class="text-slate-900">Courses</a>
            <a href="/pages/sections.html" class="hover:text-slate-900">Sections</a>
            <a href="/pages/enrollments.html" class="hover:text-slate-900">Enrollments</a>
          </nav>
        </div>
      </header>

      <main class="flex-1">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10" x-data="coursesPage()">
          <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
            <div>
              <h2 class="text-3xl font-semibold text-slate-900">Course catalog</h2>
              <p class="mt-2 text-slate-600">Browse and curate the academic catalog students can enroll in next term.</p>
            </div>
            <div class="flex flex-wrap gap-3">
              <button type="button" @click="openModal()" class="inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-smooth">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 6v12m6-6H6" stroke-linecap="round" /></svg>
                Add course
              </button>
              <button type="button" class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:border-slate-300">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4.5 4.5h15v15h-15z" /><path d="M7.5 7.5h9v9h-9z" /><path d="M7.5 12h9" /></svg>
                Print summary
              </button>
            </div>
          </div>

          <section class="mt-10 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
            <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
              <div class="w-full md:max-w-sm">
                <label for="course-search" class="text-sm font-medium text-slate-700">Search courses</label>
                <div class="mt-1 relative">
                  <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400">
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="6" /><path d="m17 17 3.5 3.5" stroke-linecap="round" /></svg>
                  </span>
                  <input id="course-search" type="search" x-model="search" placeholder="Find by title, code, or dept" class="w-full rounded-xl border border-slate-200 bg-white py-2 pl-10 pr-3 text-sm text-slate-700 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" />
                </div>
              </div>
              <div class="flex flex-col gap-4 sm:flex-row">
                <div>
                  <label for="dept-filter" class="text-sm font-medium text-slate-700">Department</label>
                  <select id="dept-filter" x-model="selectedDept" class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200">
                    <option value="">All departments</option>
                    <template x-for="dept in departments" :key="dept.id">
                      <option :value="dept.id" x-text="`${dept.name} (${dept.id})`"></option>
                    </template>
                  </select>
                </div>
                <div>
                  <label for="credits-filter" class="text-sm font-medium text-slate-700">Credits</label>
                  <select id="credits-filter" x-model="selectedCredits" class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200">
                    <option value="">All</option>
                    <option value="3">3 credits</option>
                    <option value="4">4 credits</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="mt-8 grid gap-5 sm:grid-cols-2 xl:grid-cols-3">
              <template x-if="filteredCourses.length === 0">
                <div class="sm:col-span-2 xl:col-span-3 flex flex-col items-center justify-center gap-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50/80 py-12 text-center">
                  <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-sm">
                    <svg class="h-6 w-6 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M7.5 4.5h9L21 12l-4.5 7.5h-9L3 12 7.5 4.5Z" /><path d="M12 9v6" stroke-linecap="round" /><path d="M9 12h6" stroke-linecap="round" /></svg>
                  </span>
                  <div>
                    <h3 class="text-lg font-semibold text-slate-900">No courses found</h3>
                    <p class="mt-1 text-sm text-slate-500">Adjust filters or add a new course to the catalog.</p>
                  </div>
                  <button type="button" @click="openModal()" class="inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-smooth">
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 6v12m6-6H6" stroke-linecap="round" /></svg>
                    Add course
                  </button>
                </div>
              </template>

              <template x-for="course in filteredCourses" :key="course.id">
                <article class="flex flex-col justify-between rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
                  <div class="space-y-3">
                    <div class="flex items-center justify-between">
                      <span class="inline-flex items-center gap-2 rounded-full bg-slate-900/5 px-3 py-1 text-xs font-medium text-slate-700">
                        <span class="h-2 w-2 rounded-full bg-slate-400"></span>
                        <span x-text="course.dept_id"></span>
                      </span>
                      <span class="text-xs font-semibold text-slate-400" x-text="`${course.credits} credits`"></span>
                    </div>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-900" x-text="course.title"></h3>
                      <p class="text-sm text-slate-500" x-text="course.description"></p>
                    </div>
                  </div>
                  <div class="mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500">
                    <p class="font-medium text-slate-700" x-text="course.id"></p>
                    <div class="flex items-center gap-2">
                      <button type="button" @click="openModal(course)" class="inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-medium text-slate-600 hover:border-slate-300 hover:text-slate-900">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="m4.5 19.5 3.75-.938a2 2 0 0 0 .938-.52l9.02-9.02a1.5 1.5 0 0 0-2.121-2.122l-9.02 9.02a2 2 0 0 0-.52.938L4.5 19.5Z" /><path d="M14.25 6.75 17.25 9.75" /></svg>
                        Edit
                      </button>
                      <button type="button" @click="removeCourse(course.id)" class="inline-flex items-center gap-1 rounded-full border border-transparent px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6.75 7.5h10.5" stroke-linecap="round" /><path d="M9 7.5V6a1.5 1.5 0 0 1 1.5-1.5h3A1.5 1.5 0 0 1 15 6v1.5" /><path d="M8.25 7.5V18a1.5 1.5 0 0 0 1.5 1.5h4.5A1.5 1.5 0 0 0 15.75 18V7.5" /></svg>
                        Delete
                      </button>
                    </div>
                  </div>
                </article>
              </template>
            </div>
          </section>
        </div>

        <div x-cloak x-show="toast.visible" x-transition class="fixed top-4 right-4 z-50 w-full max-w-sm rounded-xl border px-4 py-3 shadow-lg" :class="toast.variant === 'success' ? 'border-emerald-200 bg-emerald-50/90 text-emerald-800' : 'border-rose-200 bg-rose-50/90 text-rose-700'" role="status" aria-live="polite">
          <div class="flex items-start gap-3">
            <span class="mt-0.5 inline-flex h-6 w-6 flex-none items-center justify-center rounded-full" :class="toast.variant === 'success' ? 'bg-emerald-600 text-white' : 'bg-rose-600 text-white'">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><template x-if="toast.variant === 'success'"><path d="M5.25 12.75 9 16.5l9-9" stroke-linecap="round" stroke-linejoin="round" /></template><template x-if="toast.variant !== 'success'"><path d="M15 9 9 15m0-6 6 6" stroke-linecap="round" stroke-linejoin="round" /></template></svg>
            </span>
            <div>
              <p class="text-sm font-semibold" x-text="toast.message"></p>
              <p class="text-xs text-slate-500" x-text="toast.detail"></p>
            </div>
            <button type="button" class="ml-auto text-xs font-medium text-slate-500 hover:text-slate-700" @click="toast.visible = false">Dismiss</button>
          </div>
        </div>

        <div x-cloak x-show="modalOpen" class="fixed inset-0 z-40 flex items-center justify-center px-4 py-6" role="dialog" aria-modal="true">
          <div class="absolute inset-0 bg-slate-900/40" @click="closeModal()"></div>
          <div class="relative w-full max-w-lg rounded-2xl border border-slate-200 bg-white p-6 shadow-xl" x-trap.noscroll="modalOpen" x-transition>
            <header class="flex items-start justify-between gap-3">
              <div>
                <p class="text-xs uppercase tracking-widest text-slate-400" x-text="editingCourse ? 'Update course' : 'Create course'"></p>
                <h2 class="text-2xl font-semibold text-slate-900" x-text="editingCourse ? 'Edit course' : 'Add new course'"></h2>
              </div>
              <button type="button" class="rounded-lg border border-transparent p-2 text-slate-400 hover:text-slate-600" @click="closeModal()" aria-label="Close dialog">
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 9l6 6m0-6-6 6" stroke-linecap="round" /></svg>
              </button>
            </header>
            <form class="mt-6 space-y-4" @submit.prevent="saveCourse()">
              <div>
                <label for="course-id" class="text-sm font-medium text-slate-700">Course code</label>
                <input id="course-id" type="text" x-model="form.id" class="mt-1 w-full rounded-xl border bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" :class="errors.id ? 'border-rose-300' : 'border-slate-200'" placeholder="e.g. CIS-210" required />
                <p class="mt-1 text-xs text-slate-500">Use the registrar approved catalog code.</p>
                <p x-show="errors.id" x-text="errors.id" class="mt-1 text-xs font-medium text-rose-600"></p>
              </div>
              <div>
                <label for="course-title" class="text-sm font-medium text-slate-700">Title</label>
                <input id="course-title" type="text" x-model="form.title" class="mt-1 w-full rounded-xl border bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" :class="errors.title ? 'border-rose-300' : 'border-slate-200'" placeholder="Course title" required />
                <p x-show="errors.title" x-text="errors.title" class="mt-1 text-xs font-medium text-rose-600"></p>
              </div>
              <div class="grid gap-4 sm:grid-cols-2">
                <div>
                  <label for="course-dept" class="text-sm font-medium text-slate-700">Department</label>
                  <select id="course-dept" x-model="form.dept_id" class="mt-1 w-full rounded-xl border bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" :class="errors.dept_id ? 'border-rose-300' : 'border-slate-200'" required>
                    <option value="" disabled>Select department</option>
                    <template x-for="dept in departments" :key="dept.id">
                      <option :value="dept.id" x-text="`${dept.name} (${dept.id})`"></option>
                    </template>
                  </select>
                  <p x-show="errors.dept_id" x-text="errors.dept_id" class="mt-1 text-xs font-medium text-rose-600"></p>
                </div>
                <div>
                  <label for="course-credits" class="text-sm font-medium text-slate-700">Credits</label>
                  <input id="course-credits" type="number" min="0" step="1" x-model.number="form.credits" class="mt-1 w-full rounded-xl border bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" :class="errors.credits ? 'border-rose-300' : 'border-slate-200'" placeholder="3" required />
                  <p x-show="errors.credits" x-text="errors.credits" class="mt-1 text-xs font-medium text-rose-600"></p>
                </div>
              </div>
              <div>
                <label for="course-description" class="text-sm font-medium text-slate-700">Description</label>
                <textarea id="course-description" rows="3" x-model="form.description" class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" placeholder="Brief summary of the course"></textarea>
              </div>
              <div class="flex items-center justify-end gap-3 pt-4">
                <button type="button" class="rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 hover:border-slate-300" @click="closeModal()">Cancel</button>
                <button type="submit" class="inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-smooth">
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5.25 12.75 9 16.5l9-9" stroke-linecap="round" stroke-linejoin="round" /></svg>
                  Save course
                </button>
              </div>
            </form>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    const courseSeed = [
      { id: 'CIS-210', title: 'Data Structures', credits: 3, dept_id: 'CS', description: 'Foundational algorithms and data abstractions with weekly labs.' },
      { id: 'CIS-330', title: 'Operating Systems', credits: 4, dept_id: 'CS', description: 'Kernel architecture, scheduling, and concurrency design.' },
      { id: 'MTH-240', title: 'Linear Algebra', credits: 3, dept_id: 'MATH', description: 'Vector spaces, eigenvalues, and applications to data science.' },
      { id: 'BIO-120', title: 'Genetics', credits: 4, dept_id: 'BIO', description: 'Fundamentals of DNA replication, transcription, and expression.' },
      { id: 'ECON-201', title: 'Microeconomics', credits: 3, dept_id: 'ECON', description: 'Consumer theory, firm behavior, and market equilibrium.' },
      { id: 'PHYS-330', title: 'Quantum Mechanics', credits: 4, dept_id: 'PHYS', description: 'Quantum theory of matter with emphasis on atomic systems.' }
    ];

    const courseDepartments = [
      { id: 'CS', name: 'Computer Science' },
      { id: 'MATH', name: 'Mathematics' },
      { id: 'BIO', name: 'Biology' },
      { id: 'PHYS', name: 'Physics' },
      { id: 'ECON', name: 'Economics' },
      { id: 'BUS', name: 'Business Administration' }
    ];

    document.addEventListener('alpine:init', () => {
      Alpine.data('coursesPage', () => ({
        search: '',
        selectedDept: '',
        selectedCredits: '',
        courses: courseSeed.map((course) => ({ ...course })),
        departments: courseDepartments,
        modalOpen: false,
        editingCourse: null,
        form: { id: '', title: '', credits: 3, dept_id: '', description: '' },
        errors: {},
        toast: { visible: false, message: '', detail: '', variant: 'success' },
        get filteredCourses() {
          return this.courses.filter((course) => {
            const matchesDept = this.selectedDept ? course.dept_id === this.selectedDept : true;
            const matchesCredits = this.selectedCredits ? Number(course.credits) === Number(this.selectedCredits) : true;
            const term = this.search.trim().toLowerCase();
            const matchesSearch = term
              ? [course.title, course.id, course.dept_id].some((value) => (value || '').toLowerCase().includes(term))
              : true;
            return matchesDept && matchesCredits && matchesSearch;
          });
        },
        openModal(course = null) {
          this.editingCourse = course ? { ...course } : null;
          this.form = course ? { ...course } : { id: '', title: '', credits: 3, dept_id: '', description: '' };
          this.errors = {};
          this.modalOpen = true;
        },
        closeModal() {
          this.modalOpen = false;
        },
        validate() {
          const nextErrors = {};
          if (!this.form.id.trim()) nextErrors.id = 'Course code is required.';
          if (!this.form.title.trim()) nextErrors.title = 'Course title is required.';
          if (!this.form.dept_id) nextErrors.dept_id = 'Select a department.';
          if (this.form.credits === '' || Number.isNaN(Number(this.form.credits)) || Number(this.form.credits) <= 0) {
            nextErrors.credits = 'Credits must be a positive number.';
          }
          this.errors = nextErrors;
          return Object.keys(nextErrors).length === 0;
        },
        saveCourse() {
          if (!this.validate()) {
            this.showToast('Please review the highlighted fields.', 'error', 'Invalid course details');
            return;
          }
          if (this.editingCourse) {
            const index = this.courses.findIndex((course) => course.id === this.editingCourse.id);
            if (index !== -1) {
              this.courses.splice(index, 1, { ...this.form });
              this.showToast('Course updated successfully.', 'success', 'Catalog entry saved.');
            }
          } else {
            if (this.courses.some((course) => course.id === this.form.id)) {
              this.errors.id = 'A course with this code already exists.';
              this.showToast('Duplicate course code.', 'error', 'Use a unique catalog code.');
              return;
            }
            this.courses = [...this.courses, { ...this.form }];
            this.showToast('Course added to catalog.', 'success', 'Publish changes when ready.');
          }
          this.closeModal();
        },
        removeCourse(id) {
          if (!window.confirm('Remove this course from the catalog?')) {
            return;
          }
          this.courses = this.courses.filter((course) => course.id !== id);
          this.showToast('Course removed.', 'success', 'Students will no longer see this course.');
        },
        showToast(message, variant = 'success', detail = '') {
          this.toast = { visible: true, message, variant, detail };
          setTimeout(() => {
            this.toast.visible = false;
          }, 3200);
        }
      }));
    });
  </script>
</body>
</html>
